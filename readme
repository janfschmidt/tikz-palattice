draw accelerator lattices
with pgf/tikz

by Jan Schmidt <schmidt@physik.uni-bonn.de>


usage:
 -----
* lattice environment with 4 optional arguments:
  1. [tikz options] give any options for the tikzpicture (e.g. overlay)
  2. [scale] scale whole picture
  3. [label fontsize] text label fontsize (default \normalsize)
  4. [label distance] distance of text labels to elements (default 1cm)
 -----
* within lattice environment:
** elements:
  - \drift{length/m}[name (default: none)]
  - \dipole{name}{length/m}{bending angle/deg}[thickness (default 8mm)]
  - \quadrupole{name}{length/m}
  - \kicker{name}{length/m}
  - \cavity{name}{length/m}
  - \source{name}
  - \screen{name}
  - \marker{name}[height/m (default )] a line perpendicular to beamline of given length/height
** other commands:
  - \rotate{angle/deg} "bends" the beamline. e.g. to set starting angle
  - \shiftlabels moves labels to other side of elements (swap with marker labels)
  - \start{coordinate/m} sets starting point of lattice. use before first element
     coordinate in form (x,y) or any tikz label, e.g. (mylabel.east)
     hint: use with \savecoordinate to connect lattices! (compile twice!)
  - \drawrule{start coordinate/m}{tick distance/m} a rule to visualize lattice size.
     coordinate in form (x,y) or any tikz label, e.g. (mylabel.east)
  - \setdriftcolor{color (default black)} for all following drifts
  - \setmarkercolor{color (default red)} for all following markers
  - \setelementcolor{type}{color (default depends on type)} define color for one element-type
** to add something manually:
  - \savecoordinate{name}[position (default: east)] save coordinate of previous element
     to access it later. you can use all tikz/pgf commands within lattice environment.
     You can also connect multiple lattices. use tikz overlay option (1. argument of lattice)
     position specifies the exact place of the element (north, center, south west, ...).
     Here east is always downstream and west upstream.
     ! DON'T use bare numbers as names - e.g. (1). These are the internal identifiers.
     hint: use with \start to connect lattices! (compile twice!)
 -----
 * lengths are set in meter, so you write {1.32} for 1.32m.
 * picture scale: for lattice scale=1 an element of 1m length is plotted with 2cm length
 * minimum element length 0.01m (drifts can be shorter)
 * maximum drift length <2.9m (just add a second drift to get a longer one)
